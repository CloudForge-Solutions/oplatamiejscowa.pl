help: ## üìã Show this help message with all available targets
	@echo ""
	@echo "üèõÔ∏è  $(PROJECT_TITLE) - Makefile Commands"
	@echo "üìù  $(PROJECT_DESCRIPTION)"
	@echo ""
	@echo "üìã Available targets:"
	@grep -E '^[a-zA-Z_-]+:.*?## .*$$' $(MAKEFILE_LIST) | sort | awk 'BEGIN {FS = ":.*?## "}; {printf "  \033[36m%-20s\033[0m %s\n", $$1, $$2}'
	@echo ""

#===================================================================================================
#=== Setup and Installation Targets
#===================================================================================================

info: ## üìã Show project information and current configuration
	@echo ""
	@echo "üèõÔ∏è  Project Information:"
	@echo "  üìõ Name: $(PROJECT_NAME)"
	@echo "  üìù Title: $(PROJECT_TITLE)"
	@echo "  üìÑ Description: $(PROJECT_DESCRIPTION)"
	@echo "  üî¢ Version: $(VERSION)"
	@echo "  üÜî Build ID: $(BUILD_ID)"
	@echo "  üåê Domain: $(DOMAIN)"
	@echo ""
	@echo "üîß Development Configuration:"
	@echo "  üì¶ Node Version: $(NVM_NODE_VERSION)"
	@echo "  üåê Dev Port: $(DEV_PORT)"
	@echo "  üîç Preview Port: $(PREVIEW_PORT)"
	@echo "  üèóÔ∏è  Build Mode: $(BUILD_MODE)"
	@echo "  üó∫Ô∏è  Source Maps: $(SOURCE_MAP)"
	@echo ""
	@echo "üë§ System Information:"
	@echo "  üêö Shell: $(SHELL_NAME) $(SHELL_VERSION)"
	@echo "  üë§ User: $(USERNAME) ($(UID):$(GID))"
	@echo ""

install: ## üì¶ Install all project dependencies
	cd src/app
	@echo "üì¶ Installing dependencies for $(PROJECT_TITLE)..."
	@source ${NVM_DIR}/nvm.sh
	@nvm use ${NVM_NODE_VERSION} || nvm install ${NVM_NODE_VERSION}
	@echo "üìã Node.js version: $$(node --version)"
	@echo "üìã NPM version: $$(npm --version)"
	@echo "üîß Installing dependencies..."
	@npm install @azure/storage-blob
	@npm i
	@echo "‚úÖ Dependencies installed successfully!"

setup: install ## üöÄ Complete project setup (install + environment check)
	@echo "üöÄ Setting up $(PROJECT_TITLE) development environment..."
	@$(MAKE) deps-check
	@$(MAKE) type-check
	@echo "‚úÖ Project setup complete! Run 'make dev' to start development."

#===================================================================================================
#=== Build Targets
#===================================================================================================

build: ## üî® Build application for production
	cd src/app
	@echo "üî® Building $(PROJECT_TITLE) for production..."
	@source ${NVM_DIR}/nvm.sh
	@nvm use ${NVM_NODE_VERSION}
	@echo "üìã Node.js version: $$(node --version)"
	@echo "üìã NPM version: $$(npm --version)"
	@echo "üìã Application version: $(VERSION)-$(BUILD_ID)"
	@echo "üßπ Cleaning previous build..."
	@rm -rf dist/
	@echo "üî® Building with Vite for production..."
	@NODE_ENV=production VITE_APP_VERSION=$(VERSION) VITE_BUILD_ID=$(BUILD_ID) npm run build
	@echo "‚úÖ Application built successfully!"
	@echo "üìÅ Built files are in the dist/ directory:"
	@ls -la dist/ | head -10
	@echo "ÔøΩ Build size analysis:"
	@du -sh dist/
	@echo "üéâ Production build complete!"

build-staging: ## üî® Build application for staging environment
	cd src/app
	@echo "üî® Building $(PROJECT_TITLE) for staging..."
	@source ${NVM_DIR}/nvm.sh
	@nvm use ${NVM_NODE_VERSION}
	@NODE_ENV=staging VITE_APP_VERSION=$(VERSION)-staging VITE_BUILD_ID=$(BUILD_ID) npm run build
	@echo "‚úÖ Staging build complete!"

build-analyze: build ## üìä Build and analyze bundle size
	cd src/app
	@echo "üìä Analyzing bundle size..."
	@npx vite-bundle-analyzer dist/


#===================================================================================================
#=== Development Targets
#===================================================================================================

dev-check: ## üîç Run pre-development checks (types, lint, format)
	cd src/app
	@echo "üîç Running pre-development checks..."
	@source ${NVM_DIR}/nvm.sh && nvm use ${NVM_NODE_VERSION}
	@npm run dev:check
	@echo "‚úÖ Pre-development checks passed!"

dev: ## üöÄ Start development server with hot reload + Azure Storage Emulator (Azurite)
	cd src/app
	@echo "üöÄ Starting $(PROJECT_TITLE) development server with Azure Storage Emulator..."
	@source ${NVM_DIR}/nvm.sh && nvm use ${NVM_NODE_VERSION}
	@echo "üìã Node.js version: $$(node --version)"
	@echo "üåê Starting parallel services:"
	@echo "   ‚Ä¢ Vite Dev Server: http://$(DEV_HOST):$(DEV_PORT)"
	@echo "   ‚Ä¢ Azure Blob Storage: http://$(AZURITE_HOST):$(AZURITE_PORT_BLOB)"
	@echo "   ‚Ä¢ Azure Queue Storage: http://$(AZURITE_HOST):$(AZURITE_PORT_QUEUE)"
	@echo "   ‚Ä¢ Azure Table Storage: http://$(AZURITE_HOST):$(AZURITE_PORT_TABLE)"
	@echo ""
	@echo "‚ö†Ô∏è  Temporarily bypassing pre-checks due to ESLint config issue"
	@echo "üí° Use 'make dev-strict' for development with pre-checks"
	@echo ""
	npm run dev

dev-react: ## üöÄ Start React development server (without pre-checks)
	cd src/app
	@echo "üöÄ Starting React development server directly..."
	@source ${NVM_DIR}/nvm.sh && nvm use ${NVM_NODE_VERSION}
	@npm run dev:react

dev-strict: ## üöÄ Start development server with strict pre-checks (use after fixing ESLint)
	cd src/app
	@echo "üöÄ Starting $(PROJECT_TITLE) development server with strict checks..."
	@source ${NVM_DIR}/nvm.sh && nvm use ${NVM_NODE_VERSION}
	@echo "üìã Node.js version: $$(node --version)"
	@$(MAKE) dev-check
	@echo "üåê Checking if port $(DEV_PORT) is already in use..."
	@if lsof -iTCP:$(DEV_PORT) -sTCP:LISTEN -t >/dev/null 2>&1; then
		echo "‚ö†Ô∏è  Port $(DEV_PORT) is already in use. Please stop the existing server or use a different port."
		echo "üí° You can check what's running on port $(DEV_PORT) with: lsof -iTCP:$(DEV_PORT) -sTCP:LISTEN"
		exit 1
	else
		echo "üåê Starting server on http://$(DEV_HOST):$(DEV_PORT)"
		npm run dev:react
	fi

preview: build ## üîç Preview production build locally
	cd src/app
	@echo "ÔøΩ Starting preview server for production build..."
	@source ${NVM_DIR}/nvm.sh
	@nvm use ${NVM_NODE_VERSION}
	@echo "üìã Node.js version: $$(node --version)"
	@echo "üåê Starting preview server on http://$(DEV_HOST):$(PREVIEW_PORT)"
	@npm run preview

#===================================================================================================
#=== Maintenance Targets
#===================================================================================================

clean: ## üßπ Clean build artifacts and temporary files
	cd src/app
	@echo "üßπ Cleaning build artifacts and temporary files..."
	@rm -rf dist/
	@rm -rf .vite/
	@rm -rf coverage/
	@rm -rf .nyc_output/
	@echo "‚úÖ Clean complete!"

clean-all: clean ## üßπ Deep clean including node_modules
	cd src/app
	@echo "üßπ Deep cleaning including node_modules..."
	@rm -rf node_modules/
	@rm -rf package-lock.json
	@echo "‚úÖ Deep clean complete! Run 'make install' to reinstall dependencies."

#===================================================================================================
#=== Testing Targets
#===================================================================================================

test: ## üß™ Run all tests
	cd src/app
	@echo "üß™ Running tests for $(PROJECT_TITLE)..."
	@source ${NVM_DIR}/nvm.sh
	@nvm use ${NVM_NODE_VERSION}
	@npm run test
	@echo "‚úÖ Tests completed!"

test-watch: ## üß™ Run tests in watch mode
	cd src/app
	@echo "üß™ Running tests in watch mode..."
	@source ${NVM_DIR}/nvm.sh
	@nvm use ${NVM_NODE_VERSION}
	@npm run test:watch

test-coverage: ## üìä Run tests with coverage report
	cd src/app
	@echo "üìä Running tests with coverage..."
	@source ${NVM_DIR}/nvm.sh
	@nvm use ${NVM_NODE_VERSION}
	@npm run test:coverage
	@echo "üìä Coverage report generated in coverage/ directory"

#===================================================================================================
#=== Code Quality Targets
#===================================================================================================

lint: ## üîç Run ESLint to check code quality
	cd src/app
	@echo "üîç Running ESLint..."
	@source ${NVM_DIR}/nvm.sh
	@nvm use ${NVM_NODE_VERSION}
	@npm run lint
	@echo "‚úÖ Linting completed!"

lint-fix: ## üîß Fix ESLint issues automatically
	cd src/app
	@echo "üîß Running ESLint with auto-fix..."
	@source ${NVM_DIR}/nvm.sh
	@nvm use ${NVM_NODE_VERSION}
	@npm run lint -- --fix
	@echo "‚úÖ Lint fixes applied!"

format: ## üíÖ Format code with Prettier
	cd src/app
	@echo "üíÖ Formatting code with Prettier..."
	@source ${NVM_DIR}/nvm.sh
	@nvm use ${NVM_NODE_VERSION}
	@npm run format
	@echo "‚úÖ Code formatted!"

format-check: ## üîç Check code formatting with Prettier
	cd src/app
	@echo "üîç Checking code formatting..."
	@source ${NVM_DIR}/nvm.sh
	@nvm use ${NVM_NODE_VERSION}
	@npm run format:check
	@echo "‚úÖ Format check completed!"

type-check: ## üîç Run TypeScript type checking
	cd src/app
	@echo "üîç Running TypeScript type checking..."
	@source ${NVM_DIR}/nvm.sh
	@nvm use ${NVM_NODE_VERSION}
	@npx tsc --noEmit
	@echo "‚úÖ Type checking completed!"

quality: ## üéØ Run all quality checks (lint, format, types)
	cd src/app
	@echo "üéØ Running comprehensive quality checks..."
	@$(MAKE) lint
	@$(MAKE) format-check
	@$(MAKE) type-check
	@echo "‚úÖ All quality checks passed!"

quality-fix: ## üîß Fix all quality issues automatically
	cd src/app
	@echo "üîß Running comprehensive quality fixes..."
	@$(MAKE) lint-fix
	@$(MAKE) format
	@echo "‚úÖ All quality fixes applied!"

serve: build ## üåê Serve production build locally
	cd src/app
	@echo "üåê Serving production build..."
	@source ${NVM_DIR}/nvm.sh
	@nvm use ${NVM_NODE_VERSION}
	@echo "üìÅ Serving from dist/ directory"
	@npx serve dist -p $(DEV_PORT) -s
	@echo "üåê Application available at http://$(DEV_HOST):$(DEV_PORT)"

#===================================================================================================
#=== Security and Maintenance Targets
#===================================================================================================

audit: ## üîí Run npm security audit
	@echo "ÔøΩ Running security audit..."
	@source ${NVM_DIR}/nvm.sh
	@nvm use ${NVM_NODE_VERSION}
	@npm audit --audit-level=moderate
	@echo "‚úÖ Security audit completed!"

security-audit: ## üîí Run comprehensive security audit with fix suggestions
	@echo "ÔøΩ Running comprehensive security audit..."
	@source ${NVM_DIR}/nvm.sh
	@nvm use ${NVM_NODE_VERSION}
	@npm audit --audit-level=low
	@echo "üí° To fix issues automatically, run: npm audit fix"
	@echo "‚úÖ Security audit completed!"

update: ## üì¶ Update npm dependencies (interactive)
	@echo "ÔøΩ Updating dependencies..."
	@source ${NVM_DIR}/nvm.sh
	@nvm use ${NVM_NODE_VERSION}
	@npx npm-check-updates --interactive
	@echo "‚úÖ Dependencies updated!"

deps-check: ## üîç Check for outdated dependencies
	@echo "ÔøΩ Checking for outdated dependencies..."
	@source ${NVM_DIR}/nvm.sh
	@nvm use ${NVM_NODE_VERSION}
	@npm outdated || true
	@echo "‚úÖ Dependency check completed!"

#===================================================================================================
#=== CI/CD and Deployment Targets
#===================================================================================================

ci-check: ## ü§ñ Run all CI checks (quality, tests, build)
	@echo "ü§ñ Running CI checks for $(PROJECT_TITLE)..."
	@$(MAKE) quality
	@$(MAKE) test
	@$(MAKE) build
	@echo "‚úÖ All CI checks passed!"

deploy-staging: build-staging ## üöÄ Deploy to staging environment
	@echo "üöÄ Deploying to staging..."
	@echo "‚ö†Ô∏è  Staging deployment not configured yet"
	@echo "üí° Configure your staging deployment process here"

deploy-production: build ## üöÄ Deploy to production environment
	@echo "üöÄ Deploying to production..."
	@echo "‚ö†Ô∏è  Production deployment not configured yet"
	@echo "ÔøΩ Configure your production deployment process here"

#===================================================================================================
#=== Docker Targets (Optional)
#===================================================================================================

docker-build: ## üê≥ Build Docker image
	@echo "üê≥ Building Docker image..."
	@docker build -t $(PROJECT_NAME):$(VERSION) .
	@echo "‚úÖ Docker image built!"

docker-run: docker-build ## üê≥ Run Docker container
	@echo "üê≥ Running Docker container..."
	@docker run -p $(DEV_PORT):80 $(PROJECT_NAME):$(VERSION)

#===================================================================================================
#=== Debug and Utility Targets
#===================================================================================================

debug: ## üêõ Show debug information
	@echo "ÔøΩ Debug Information:"
	@echo "  üìÅ Current directory: $$(pwd)"
	@echo "  üì¶ Package.json exists: $$(test -f package.json && echo 'Yes' || echo 'No')"
	@echo "  üì¶ Node modules exists: $$(test -d node_modules && echo 'Yes' || echo 'No')"
	@echo "  üîß NVM directory: $(NVM_DIR)"
	@echo "  üìã Current Node version: $$(node --version 2>/dev/null || echo 'Not available')"
	@echo "  üìã Current NPM version: $$(npm --version 2>/dev/null || echo 'Not available')"
	@echo "  üåê Port $(DEV_PORT) status: $$(lsof -iTCP:$(DEV_PORT) -sTCP:LISTEN -t >/dev/null 2>&1 && echo 'In use' || echo 'Available')"

logs: ## üìã Show recent development logs (if available)
	@echo "üìã Recent development logs:"
	@echo "üí° No log aggregation configured yet"

backup: ## üíæ Backup project configuration
	@echo "üíæ Creating backup of project configuration..."
	@mkdir -p backups/
	@tar -czf backups/config-backup-$(shell date +%Y%m%d-%H%M%S).tar.gz
		package.json package-lock.json
		vite.config.ts tsconfig.json
		.eslintrc.cjs .prettierrc
		.env.example Makefile
		2>/dev/null || true
	@echo "‚úÖ Configuration backup created in backups/ directory"

restore: ## üîÑ Restore from backup (interactive)
	@echo "üîÑ Available backups:"
	@ls -la backups/ 2>/dev/null || echo "No backups found"
	@echo "üí° To restore, extract the desired backup manually"


#===================================================================================================
#=== Tourist Tax Payment System - Development Workflow
#===================================================================================================
#
# üöÄ Quick Start:
#   make setup          # Complete project setup
#   make dev            # Start development server (bypassing checks temporarily)
#   make dev-react      # Start React server directly
#
# üîß Development:
#   make dev-strict     # Start with strict pre-checks (after fixing ESLint)
#   make test-watch     # Run tests in watch mode
#   make quality-fix    # Fix code quality issues (ESLint config needs fixing)
#
# üèóÔ∏è  Production:
#   make ci-check       # Run all CI checks
#   make build          # Build for production
#   make serve          # Serve production build
#
# üîç Quality Assurance:
#   make quality        # Run all quality checks
#   make test-coverage  # Generate test coverage
#   make security-audit # Check for security issues
#
# üóÑÔ∏è Azure Storage Emulator:
#   make dev            # Start development server (includes Azurite automatically)
#   make storage-test   # Test all storage services with curl
#   make storage-status # Check emulator status
#   make storage-stop   # Stop storage emulator manually
#
# üí° Tips:
#   - Use 'make help' to see all available targets
#   - All targets use the correct Node.js version via NVM
#   - Quality checks are integrated into the development workflow
#   - CI/CD targets are ready for automation
#   - Storage emulator uses default Azure Storage Emulator credentials
#
#===================================================================================================
#=== Azure Storage Emulator (Azurite) Targets
#===================================================================================================

storage-emulator: storage-start ## üóÑÔ∏è Start Azure Storage Emulator (Azurite) with all services
	@echo "‚úÖ Azure Storage Emulator started successfully!"
	@echo "üåê Blob Service: http://$(AZURITE_HOST):$(AZURITE_PORT_BLOB)"
	@echo "üì¨ Queue Service: http://$(AZURITE_HOST):$(AZURITE_PORT_QUEUE)"
	@echo "üìä Table Service: http://$(AZURITE_HOST):$(AZURITE_PORT_TABLE)"
	@echo "üí° Use 'make storage-test' to run curl tests"
	@echo "üí° Use 'make storage-stop' to stop the emulator"

storage-start: ## üöÄ Start Azurite storage emulator in background
	@echo "üöÄ Starting Azure Storage Emulator (Azurite)..."
	@source ${NVM_DIR}/nvm.sh && nvm use ${NVM_NODE_VERSION}
	@echo "üìã Node.js version: $$(node --version)"
	@echo "üìã NPM version: $$(npm --version)"
	@mkdir -p $(AZURITE_WORKSPACE)
	@echo "üìÅ Workspace: $(AZURITE_WORKSPACE)"

	echo "üóÑÔ∏è Starting Azurite with all services..."
	if [ "$(AZURITE_DEBUG)" = "true" ]; then
		source ${NVM_DIR}/nvm.sh && nvm use ${NVM_NODE_VERSION} &&
		npx azurite --silent --location $(AZURITE_WORKSPACE)
			--blobHost $(AZURITE_HOST) --blobPort $(AZURITE_PORT_BLOB)
			--queueHost $(AZURITE_HOST) --queuePort $(AZURITE_PORT_QUEUE)
			--tableHost $(AZURITE_HOST) --tablePort $(AZURITE_PORT_TABLE)
			--debug $(AZURITE_WORKSPACE)/debug.log &
	else
		source ${NVM_DIR}/nvm.sh && nvm use ${NVM_NODE_VERSION} &&
		npx azurite --silent --location $(AZURITE_WORKSPACE)
			--blobHost $(AZURITE_HOST) --blobPort $(AZURITE_PORT_BLOB)
			--queueHost $(AZURITE_HOST) --queuePort $(AZURITE_PORT_QUEUE)
			--tableHost $(AZURITE_HOST) --tablePort $(AZURITE_PORT_TABLE) &
	fi
	echo "‚è≥ Waiting for Azurite to start..."
	sleep 3
	if pgrep -f "azurite" > /dev/null; then
		echo "‚úÖ Azurite started successfully!"
	else
		echo "‚ùå Failed to start Azurite. Check if npx and azurite are installed."
		echo "üí° Install with: npm install -g azurite"
		exit 1
	fi

storage-stop: ## ‚èπÔ∏è Stop Azure Storage Emulator
	@echo "‚èπÔ∏è  Stopping Azure Storage Emulator..."
	@if pgrep -f "azurite" > /dev/null; then
		pkill -f "azurite"
		echo "‚úÖ Azurite stopped successfully!"
	else
		echo "‚ÑπÔ∏è  Azurite is not running."
	fi

storage-status: ## üìä Check Azure Storage Emulator status
	@echo "üìä Azure Storage Emulator Status:"
	@if pgrep -f "azurite" > /dev/null; then
		echo "‚úÖ Status: RUNNING"
		echo "üîç Process: $$(pgrep -f azurite)"
		echo "üåê Blob Service: http://$(AZURITE_HOST):$(AZURITE_PORT_BLOB) $$(curl -s -o /dev/null -w '%{http_code}' http://$(AZURITE_HOST):$(AZURITE_PORT_BLOB) 2>/dev/null | grep -q 400 && echo '(‚úÖ Available)' || echo '(‚ùå Not responding)')"
		echo "üì¨ Queue Service: http://$(AZURITE_HOST):$(AZURITE_PORT_QUEUE) $$(curl -s -o /dev/null -w '%{http_code}' http://$(AZURITE_HOST):$(AZURITE_PORT_QUEUE) 2>/dev/null | grep -q 400 && echo '(‚úÖ Available)' || echo '(‚ùå Not responding)')"
		echo "üìä Table Service: http://$(AZURITE_HOST):$(AZURITE_PORT_TABLE) $$(curl -s -o /dev/null -w '%{http_code}' http://$(AZURITE_HOST):$(AZURITE_PORT_TABLE) 2>/dev/null | grep -q 400 && echo '(‚úÖ Available)' || echo '(‚ùå Not responding)')"
	else
		echo "‚ùå Status: NOT RUNNING"
		echo "üí° Start with: make storage-start"
	fi

storage-test: storage-test-blob storage-test-queue storage-test-table ## üß™ Run comprehensive curl tests for all storage services
	@echo ""
	@echo "‚úÖ All Azure Storage Emulator tests completed!"
	@echo "üí° Check the output above for any failures"

storage-test-blob: ## üß™ Test Blob Storage service with curl
	@echo ""
	@echo "üß™ Testing Blob Storage Service..."
	@echo "=================================="
	@if ! pgrep -f "azurite" > /dev/null; then
		echo "‚ùå Azurite is not running. Start it with 'make storage-start'"
		exit 1
	fi
	@echo "üìã Testing Blob Service endpoints:"
	@echo ""
	@echo "1Ô∏è‚É£  Basic connectivity test:"
	@curl -s -w "Status: %{http_code}\n" -o /dev/null "http://$(AZURITE_HOST):$(AZURITE_PORT_BLOB)/$(AZURITE_ACCOUNT)"
	@echo ""
	@echo "2Ô∏è‚É£  Connection string for your app:"
	@echo "AccountName=$(AZURITE_ACCOUNT);AccountKey=$(AZURITE_KEY);DefaultEndpointsProtocol=http;BlobEndpoint=http://$(AZURITE_HOST):$(AZURITE_PORT_BLOB)/$(AZURITE_ACCOUNT);QueueEndpoint=http://$(AZURITE_HOST):$(AZURITE_PORT_QUEUE)/$(AZURITE_ACCOUNT);TableEndpoint=http://$(AZURITE_HOST):$(AZURITE_PORT_TABLE)/$(AZURITE_ACCOUNT);"
	@echo ""
	@echo "3Ô∏è‚É£  Test with Azure CLI (if installed):"
	@echo "az storage container list --connection-string 'AccountName=$(AZURITE_ACCOUNT);AccountKey=$(AZURITE_KEY);DefaultEndpointsProtocol=http;BlobEndpoint=http://$(AZURITE_HOST):$(AZURITE_PORT_BLOB)/$(AZURITE_ACCOUNT);'"
	@echo ""
	@echo "4Ô∏è‚É£  Test blob endpoint directly:"
	@curl -s -I "http://$(AZURITE_HOST):$(AZURITE_PORT_BLOB)/$(AZURITE_ACCOUNT)" | head -3
	@echo ""
	@echo "‚úÖ Blob Storage tests completed!"

storage-test-queue: ## üß™ Test Queue Storage service with curl
	@echo ""
	@echo "üß™ Testing Queue Storage Service..."
	@echo "==================================="
	@if ! pgrep -f "azurite" > /dev/null; then
		echo "‚ùå Azurite is not running. Start it with 'make storage-start'"
		exit 1
	fi
	@echo "üìã Testing Queue Service endpoints:"
	@echo ""
	@echo "1Ô∏è‚É£  Basic connectivity test:"
	@curl -s -w "Status: %{http_code}\n" -o /dev/null "http://$(AZURITE_HOST):$(AZURITE_PORT_QUEUE)/$(AZURITE_ACCOUNT)"
	@echo ""
	@echo "2Ô∏è‚É£  Queue endpoint test:"
	@curl -s -I "http://$(AZURITE_HOST):$(AZURITE_PORT_QUEUE)/$(AZURITE_ACCOUNT)" | head -3
	@echo ""
	@echo "3Ô∏è‚É£  Test with Azure CLI (if installed):"
	@echo "az storage queue list --connection-string 'AccountName=$(AZURITE_ACCOUNT);AccountKey=$(AZURITE_KEY);DefaultEndpointsProtocol=http;QueueEndpoint=http://$(AZURITE_HOST):$(AZURITE_PORT_QUEUE)/$(AZURITE_ACCOUNT);'"
	@echo ""
	@echo "‚úÖ Queue Storage tests completed!"

storage-test-table: ## üß™ Test Table Storage service with curl
	@echo ""
	@echo "üß™ Testing Table Storage Service..."
	@echo "==================================="
	@if ! pgrep -f "azurite" > /dev/null; then
		echo "‚ùå Azurite is not running. Start it with 'make storage-start'"
		exit 1
	fi
	@echo "üìã Testing Table Service endpoints:"
	@echo ""
	@echo "1Ô∏è‚É£  Basic connectivity test:"
	@curl -s -w "Status: %{http_code}\n" -o /dev/null "http://$(AZURITE_HOST):$(AZURITE_PORT_TABLE)/$(AZURITE_ACCOUNT)"
	@echo ""
	@echo "2Ô∏è‚É£  Table endpoint test:"
	@curl -s -I "http://$(AZURITE_HOST):$(AZURITE_PORT_TABLE)/$(AZURITE_ACCOUNT)" | head -3
	@echo ""
	@echo "3Ô∏è‚É£  Test with Azure CLI (if installed):"
	@echo "az storage table list --connection-string 'AccountName=$(AZURITE_ACCOUNT);AccountKey=$(AZURITE_KEY);DefaultEndpointsProtocol=http;TableEndpoint=http://$(AZURITE_HOST):$(AZURITE_PORT_TABLE)/$(AZURITE_ACCOUNT);'"
	@echo ""
	@echo "‚úÖ Table Storage tests completed!"

